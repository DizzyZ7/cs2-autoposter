import asyncio
import os
from aiogram import Bot

async def main():
    API_TOKEN = os.getenv("BOT_TOKEN")
    CHANNEL_ID = os.getenv("CHANNEL_ID")
    TOPIC_ID = 31 

    if not API_TOKEN or not CHANNEL_ID:
        print("ะัะธะฑะบะฐ: ะะตัะตะผะตะฝะฝัะต BOT_TOKEN ะธะปะธ CHANNEL_ID ะฝะต ะฝะฐะนะดะตะฝั!")
        return

    # ะัะฟะพะปัะทัะตะผ ะบะพะฝัะตะบััะฝัะน ะผะตะฝะตะดะถะตั 'with', ััะพะฑั ัะตััะธั ะทะฐะบััะฒะฐะปะฐัั ัะฐะผะฐ
    async with Bot(token=API_TOKEN) as bot:
        MESSAGE_TEXT = """
๐จ ะญัะพ ัะตะฐะปัะฝะพ ะฟัะพะธะทะพัะปะพ! ๐จ
ะะพัะปะต ะดะพะปะณะพะณะพ ะพะถะธะดะฐะฝะธั ะธะณัะพะบะธ ะธ ััะตะนะดะตัั ะฟะพะปััะธะปะธ ัะพ, ัะตะณะพ ัะฐะบ ะฝะต ัะฒะฐัะฐะปะพ โ ัะดะพะฑะฝัะน ัะตัะฒะธั ัะดะตะปะฐะฝะฝัะน ะปัะดัะผะธ, ะบะพัะพััะต ัะฐััั ะทะฐ CS2 ๐ฎ๐ฃ

ะะพะน ัะตัะตัะฐะปัะฝัะน ะบะพะด๐
https://csboard.trade?ref=I9THBZPO

๐๏ธ ะัะพัะฐะตะผัั ั ะบััะตะน ัะบัะธะฝะพะฒ ะฒ ะปะธัะบะต
๐ ะะพะปััะต ะฝะต ะฝัะถะฝะพ ะฒัััะฝัั ะฒัะธัะบะธะฒะฐัั ะฝัะถะฝัะน ะฐะนัะตะผ

๐ง ะัั ัะฐะฑะพัะฐะตั ัะปะตะผะตะฝัะฐัะฝะพ:
โ๏ธ ะะฒะพะดะธัั ะฝะฐะทะฒะฐะฝะธะต ะฟัะตะดะผะตัะฐ โ ๐ฆ ะฝะฐัะพะดะธัั ะฝัะถะฝัะน ะฒะฐัะธะฐะฝั โ ๐ ะผะตะฝัะตัััั ะฑะตะท ะปะธัะฝะตะน ััะตัั

๐๏ธ ะคัะฝะบัะธะพะฝะฐะป ัะถะต ะฝะฐ ััะฐััะต:
๐ ะะพะธัะบ ะธะดัั ะฟะพ ะฟัะตะดะผะตัะฐะผ, ะฐ ะฝะต ะฟะพ ะฝะธะบะฐะผ ะธ ัะบัะธะฝะฐะผ
๐ฐ ะฆะตะฝั ะพะฑะฝะพะฒะปััััั ะธ ะพัะพะฑัะฐะถะฐัััั ะฒ ัะฐะทะฝัั ะฒะฐะปััะฐั
๐ ะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ัะทัะบะพะฒ โ ะบะพะผัะพัั ะดะปั ะฒัะตั ัะตะณะธะพะฝะพะฒ
๐ ะัะพะด ัะตัะตะท Google ะธะปะธ Steam โ ะฑััััะพ ะธ ะฑะตะทะพะฟะฐัะฝะพ ๐ก๏ธ

๐ ะ ััะพ ะตัั ะฝะต ะฒัั!
ะ Telegram-ะบะฐะฝะฐะปะต ะฟัะพะตะบัะฐ ะฟััะผะพ ัะตะนัะฐั ัะฐะทัะณััะฒะฐัั ะฝะพะถ ๐ช๐ก๏ธ โ  https://t.me/csboardtrade/11 ๐๐ฅ

ะะพ ะธ ััะพ ะตัะต ะฝะต ะฒัั โ
ะะตะถะดั ัะฒะพะธะผะธ ัะตัะตัะฐะปะฐะผะธ ั ัะฐะทัะณัะฐั ะดะพะฟะพะปะฝะธัะตะปัะฝะพ ะฝะพะถะธะบ, ัะฐะบ ััะพ ะฝะต ัะฟัััะธ ะฒะพะทะผะพะถะฝะพััั ๐

ะะฐะปะตัะฐะน, ัะผะพััะธ, ะฟัะพะฑัะน โ ััะตะนะดะธัั ะฒ CS2 ััะฐะปะพ ะฟัะพัะต ๐๐ฅ
"""

        try:
            await bot.send_message(
                chat_id=CHANNEL_ID, 
                text=MESSAGE_TEXT.strip(),
                message_thread_id=TOPIC_ID,
                disable_web_page_preview=False
            )
            print(f"โ ะกะพะพะฑัะตะฝะธะต ััะฟะตัะฝะพ ะพัะฟัะฐะฒะปะตะฝะพ ะฒ ัะตะผั {TOPIC_ID}!")
        except Exception as e:
            print(f"โ ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ: {e}")
            # ะัะธะฝัะดะธัะตะปัะฝะพ ะทะฐะฒะตััะฐะตะผ ั ะพัะธะฑะบะพะน ะดะปั GitHub, ะตัะปะธ ะฟะพัั ะฝะต ััะตะป
            exit(1)

if __name__ == '__main__':
    asyncio.run(main())
